Gallery=function(){return{currentImage:0,imageHolder:null,imageWrapper:null,imageCountHolder:null,maxCount:null,nextButton:null,prevButoon:null,init:function(b,d,c,f,a,e,h){this.imageHolder=b;this.imageWrapper=d;this.imageCountHolder=c;this.maxCount=$("img",b).length;this.nextButton=f;this.prevButton=a;this.descriptionHolder=e;this.descriptionWidth=h;$(b).find(".image").width($(d).width());if(document.URL.match(/#[0-9]+/)){this.gotoImage(new Number(new String(document.URL.match(/#[0-9]+/)).replace("#",""))-1)}else{this.updateCount(0)}var g=this;$(b).find("img").each(function(l){var j=$(this)[0];var k=l;$("<img/>").attr("src",$(j).attr("src")).load(function(){$(j).css({width:"100%","max-width":this.width,height:"auto"});if(k==g.currentImage){g.imageWrapper.css({height:j.height+"px"})}});var m=j.src;j.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";j.src=m});this.attachEvents()},attachEvents:function(){var d=this,b=$(this.imageWrapper),c=$(this.imageHolder),a=this.currentImage;this.nextButton.click(function(){d.next();this.blur();return false});this.prevButton.click(function(){d.previous();this.blur();return false});$(window).resize(function(){clearTimeout(b.data("resize-event"));b.data("resize-event",setTimeout(function(){b.find(".image").css({width:b.width()},600);c.css({marginLeft:(a*b.width())*-1+"px"});b.animate({height:c.find("img")[a].height+"px"},{duration:400,queue:false})},200))})},next:function(){this.gotoImage(this.currentImage+1)},previous:function(){this.gotoImage(this.currentImage-1)},updateCount:function(a){this.currentImage=a;this.imageCountHolder.innerHTML=(a+1)+"/"+this.maxCount},gotoImage:function(a){if(a>=this.maxCount){a=0}else{if(a<0){a=this.maxCount-1}}this.animateContainers(a);this.updateCount(a)},animateContainers:function(a){this.imageHolder.animate({marginLeft:(a*this.imageWrapper.width())*-1+"px"},{duration:600,queue:false});this.imageWrapper.animate({height:this.imageHolder.find("img")[a].height+"px"},{duration:400,queue:false});if(!this.descriptionHolder){return}this.descriptionHolder.animate({marginLeft:(a*this.descriptionWidth)*-1+"px"},{duration:600,queue:false})}}};